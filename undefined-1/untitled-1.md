# 2. 리팩토링 개론

## 01. 리팩토링은 무엇인가?

### 1 . 리팩토링의 의미

* 문맥에 따른 리팩토링의 의미
  * 의미 1 \[명\]
    * 겉으로 드러나는 기능은 그대로 둔 채, 알아보기 쉽고, 수정하기 간편하게 소프트웨어 내부를 수정하는 방 
  * 의미2 \[동\]
    * 리팩토링 기법을 연달아 적용하여 겉으로 드러나는 기능은 그대로 둔 채, 소프트웨어 구조를 변경하는 것  
* 리팩토링은 단순한 코드 정리에 비해 좀 더 포괄적인 개념  
* 리팩토링의 특
  * 1 . 소프트웨어를 더 이해하기 쉽고, 수정하기 쉽게 만드는 것 

  

  * 2. 겉으로 드러나는 소프트웨어 기능에 영향을 주지 않는다. 





### 2 . \[모자 두 개\] 로 설명하는 리팩토링

* 소프트웨어 개발에 리팩토링을 적용할 경우
  * 기능 추가
  * 리팩토링 이라는 별개의 두 작업에 시간을 분배해야 한다.  
* \[기능 추가\] 시에는 코드 수정 없이, 기능만 추가해야 한다.  
* \[리팩토링\]시에는 코드를 추가하지 말고, 코드 구조 개선만 해야 한다.  
* 이렇게 소프트웨어 개발 시 2가지 모자를 자주 바꿔쓴다. 
  * 이때 주의할 점
    * 각 작업이 완료될 때까지는, 반드시 본인이 현재 하고 있는 작업의 일관성을 유지해야 한다. 



## 02. 리팩토링은 왜 해야 하는가?

### 1 . \[이유1\] : 소프트웨어 설계의 개선 

* 리팩토링 미실시 시 발생하는 문제점
  * 코드 파악이 어려워짐 
    * 중복 코드 등 
  * 수정의 어려움 
* 리팩토링은 이러한 구조가 산만해진 코드를 정리하는 작업
  * 즉, 부적절한 위치에 있는 코드를 제거하는 작업  
  * 따라서 코드의 처음 설계 구조를 유지하기 위해서는 정기적으로 리팩토링을 실시해야 한다.  





### 2. \[이유 2\] : 소프트웨어에 대한 이해가 높아지기 때문에

* 프로그래밍은 컴퓨터와 나누는 대화

  * 따라서 개발자가 원하는 바를 정확히 명령하는것이 중요 

* 또한 자신이 작성한 코드를 다른 개발자들이 보는 경우도 존재
  * 이때 이러한 상황을 고려하지 않고 개발할 경우, 차후 문제 발생할 가능성 존재  
* 따라서 리팩토링을 실시하면, 코드가 본연의 목적에 더 충실해 실행된다. 
  * 이 결과 개발자가 의도한 바를 정확하게 전달할 수 있게 된다.  
* 리팩토링은 \[창 밖이 보이게 뿌연 유리창을 닦는 일 \]이다. 





### 3. \[이유 3\] : 버그를 찾기 쉬워진다. 

* 리팩토링을 통해 코드 기능을 근본적으로 이해할 수 있어, 어느 부분에서 버그가 발생하는지 파악하기 쉬워진다. 



### 4. \[이유 4\] : 프로그래밍 속도가 빨라진다. 

* 설계가 깔끔하지 않을 경우
  * 시간이 지날수록 개발속도가 떨어짐
    * 버그 찾기, 시스템 이해, 중복 코드 찾기 등으로 인해  
* 리팩토링은 설계를 깔끔하게 유지함으로써 개발 속도를 기존보다 증가시킬 수 있다. 



## 03. 리팩토링은 어떨 때 필요한가?



### 1 . 같은 작업의 삼진 아웃 때

* 비슷한 작업을 3번째 반복하게 됐을 때, 리팩토링을 실시  



### 2.  기능을 추가할 때

* 이유
  * 코드를 이해하기 쉽게 만들기 위해 
    * 코드가 지저분하면, 기능을 추가하기 힘들어진다.  



### 3 . 버그를 수정할 때

* 코드를 이해하기 쉽게 만들어 버그 찾기가 쉬워지도록 





### 4. 코드를 검수할 때

* 코드 검수 시, 개발 팀원 모두가 코드를 파악하게 되는데, 이때 리팩토링을 실시하여 코드를 이해하기 쉽게 만들어야 한다.   
* 장점
  * 다른 사람들의 좋은 아이이어들을 제안받을 기회가 생긴다. 
  * 코드 검수 결과도 더 구체적으로 받을 수 있다.
  * 다른사람이 개발한 코드를 검수하기도 쉬워진다. 





### cf\) 프로그램을 수정하기 힘든 상황 4가지

* **프로그램을 수정하기 힘든 상황 4가지**
  * **코드를 알아보기 힘들 때**
  * **중복된 로직이 들어있을 때**
  * **추가 기능을 넣어야 해서, 실행중인 코드를 변경해야 할 때**
  * **조건문 구조가 복잡할 때** 



## 04. 팀장에게 어떻게 말을 꺼내나?

### 1 . 시간이 남을 경우

* 팀장이 중요시하는 것에 맞춰, 기술적인 면, 품질적인 면 등의 장점을 부각하여 설득



### 2 . 시간이 없을 경우

* 이야기하지 말고 몰래 실시 



## 05. 리팩토링 관련 문제들

### 1 . 데이터베이스 관련 문제

### 2. 인터페이스 변경 문제

### 3. 리팩토링을 어렵게 하는 설계를 수정하는 경우

### 4. 리팩토링하면 안되는 상황 

## 06. 리팩토링과 설계

### 1 . 설계의 장점

* 사전설계방식의 장점
  * 비용이 많이 드는 재작업을 실시할 위험이 없어진다. 
* 주의해야 할 생각

  * \[설계는 핵심, 프로그래밍은 도구\]라는 생각은 위험

    * 소프트웨어는 실물의 기계와는 달리, 유연하며, 모든것이 생각을 통해 이루어진다.
    * 설계를 하면 생각이 아주 빨라지지만, 그 생각에는 빈틈이 많다. 

### 2. 리팩토링과 설

* 리팩토링으로 사전 설계를 대체할 수 있다는 주장
  * 이 경우, 완벽한 설계를 할 필요가 없어진다. 
* 이렇게 작업 중점 이동으로 얻게되는 장점
  * 설계가 단순해진다. 

## 07. 리팩토링과 성능

### 0. 리팩토링과 성능

* 하드웨어 성능이 빨라질수록 그에 맞춰  소프트웨어 속도에 대한 기대나 기준도 더 높아진다. 
* 리팩토링을 실시하면, 소프트웨어는 단기적으로는 더 느려지지만, 소프트웨어 성능을 더 간단히 조절할 수 있다. 

### 1 . 빠른 소프트웨어를 작성할 수 있는 일반적인 3가지 방법 

#### 방법 1\) 시간분배 방법

* 설계를 분해하면서, 각 구성 요소에  시간이나 메모리 사용량 같은 자원별 예산을 할당하는 것  
* 이 방법의 핵심
  * 철저한 성능 시간  = 프로그램 실행이 할당된 시간 내에    정확히 실행되어야 함을 의미 



####  방법 2\) 성능에 대한 꾸준한 관심

* 개발자는 성능을 높게 유지하기 위해  수단과 방법을 가리지 말아야 한다.  
* 단점
  * 그다지 효과가 없다. 
    * 작업이 힘들어져, 개발 속도가 빨라짐 



방법3\) 성능 최적화 전까지는 성능에 신경쓰지 않고, 프로그램을 잘   
            쪼개진 방식으로 제작하는 것 

* 프로그램을 잘 쪼갤때의 장점
  * 1 . 성능 튜닝에 할애할 시간이 생긴다.
    * 코드가 잘 쪼개져 있어서 기능 추가도 쉬어지기 때문에 더 많은 시간을 성능에만 집중할 수 있다.  
  * 2. 성능을 분석할 때 더 정밀한 분석이 가능하다 
    * 프로파일러가 더 작은 코드 부분을 찾아주기 때문에 튜닝이 더 쉬워진다.  

### 2 . 리팩토링과 소프트웨어 개발 기간의 단축

* 리팩토링 동안에는 단기적으로는 소프트웨어가 느려지지만, 최적화를 거치면서 튜닝하기가 훨씬 쉬워져서 결과적으로는 소프트웨어 개발이 더 빨라진다. 





## 

