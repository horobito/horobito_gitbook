# 3. 운영체제 구조- 시스템 콜

## 00. 이전내용 복습

* **비유로 보는 응용 프로그램, 운영체제, 시스템 리소스 \(컴퓨터 하드웨어\)의 관계**
  * **도서관으로 비유**
    *  **1\) 운영체제 : 도서관**
    *  **2\) 응용 프로그램 : 시민**
    *  **3\) 컴퓨터 하드웨어 : 책**
  * **비유로 설명하는 운영체제의 역할** 
    * 1\) **시민\(응용 프로그램\)**은 **원하는 책\(자원\)**을 요청
    *  2\) **도서관\(운영체제\)**는 **적절한 책\(자원\)**을 찾아서  시민\(응용 프로그램\)에게 전달
    *  3\) **시민\(응용 프로그램\)**이 기한이 다 되면, **도서관\(운영체제\)**이 **해당 책\(자원\)**을 회수 
* **응용 프로그램, 운영체제, 컴퓨터 하드웨어 관계**
  *  운영체제는  
     응용 프로그램이 요청하는 메모리를 

     허가하고, 분배   

  * 운영체제는 응용프로그램이 요청하는 CPU 시간을 제공 
  * 운영체제는 응용프로그램이 요청하는 

     IO Devices  사용을 허가/제어 한다.    
* 그림으로 보는 관계 

  \* 화살표 : ↑\[반환\]    ↓\[요청\]

**사용자**  
 ↑ ↓

**응용 프로그램\( \| shell\)**

↑ ↓

**운영체제**

↑ ↓

**하드웨어** \[cpu, memory, storage, network\]

## 01. 운영체제는 사용자 인터페이스 제공

* **쉘\(Shell\)** - 이 또한 하나의 응용 프로그램, 사용자 인터페이스
  * **역할** -
    * 사용자가 운영체제 기능과 서비스를 조작할 수 있도록, **사용자** **인터페이스**를 제공하는 프로그램 
    * - 사용자의 요청을 받아서 운영체제에 전달 
    *  **종류**
      *  1\) 터미널 환경\[CLI\] 
      *  2\) GUI

## **02. 운영체제는 사용자 뿐만 아니라** **응용프로그램을 위해서도 인터페이스를 제공**



*  **API\[Application Programming Interface\]** 
  * **함수 형태로 제공**
    * 각 프로그래밍 언어에 운영체제 기능을 사용할 수 있는 함수들이 존재  ex\) open\(\) : 특정 파일을 읽어내는 용도  → 파일은 저장매체에 위치,   따라서 운영체제에 요청을 해야 함 따라서,  이것을 위해 open\(\) 이라는 **시스템 콜**을 사용  
*  **보통은 운영체제를 다루는 함수들을 묶어서 라이브러리\(library\) 형태로 제공** 
  * ex\) GNU C Library   → 여기서의 라이브러리는 운영체제를 다루는 함수들을 묶은것을 의미,   기본적인 언어 라이브러리와는 약간 다른 느낌으로 받아들여야 함  
* 좀 더 확장된 그림

  그림으로 보는 관계 

  \* 화살표 : ↑\[반환\]    ↓\[요청\]

**사용자**

 ↑ ↓

**응용 프로그램\( \| shell\)**

↑ ↓

**API\[ 응용 프로그램을 위한 인터페이스\]** - 운영체제를 향한 요청서 느낌

↑ ↓

**운영체제**

↑ ↓

**하드웨어** \[cpu, memory, storage, network\]

질문   
 그러면 shell이란 응용 프로그램은 어떤 함수들을 가지고 만들어지는가?   
  
답   
운영체제가 제공하는 API 를 가지고, shell 이라는 프로그램을 만들어서,  
 사용자로부터 입력을 받으면,   
해당 요청에 맞는 API 를 사용하여 운영체제에 요청하는 것  
 -&gt; 애플리케이션도 같은 모습

ex\)

* AppIication, User → \[시민\]
* API : 도서관 앞에 놓여져 있는 신청서 
* OS : 도서관
* Hardware: 책 

  **즉,. 운영체제는 응용프로그램이나 사용자가 운영체제 기능을 사용할 수 있도록,**

  **API 형태의 요청서를 제공해준다.** 

## 03. 시스템 콜\[또는 시스템 호출 인터페이스 \]

### 1 . 시스템 콜

* 운영체제가 운영체제 각 기능을 사용할수 있도록  \[시스템 콜\] 이라는 명령 또는 함수 제공 
* API 내부에는  해당 운영체제를 사용할 수 있는 \[시스템 콜\]을   호출하는 형태로 만들어지는 경우가 대부분 
* API는 시스템 콜을 기반으로 해서,  다양한 기능들을 추가한 형태로  각 언어에 맞추어 라이브러리 형태로 제공하는 경우가 많다.  
* 그림으로 보는 관계   


  **사용자 &lt;일반 사용자&gt;**   
  ↑ ↓

  **응용 프로그램\( \| shell\) &lt;프로그래머&gt;**

  ↑ ↓

  **Library 또는 API\[ 응용 프로그램을 위한 인터페이스\] &lt;프로그래머&gt;** 운영체제를 향한 요청서 느낌

  ↑ ↓ **System call** ↑ ↓

  **운영체제**

  ↑ ↓

  **하드웨어** \[cpu, memory, storage, network\]

* 외부에서 운영체제에 컴퓨터 자원을 사용하기 위해 요청을 하기 위,  System call 이라는 것을 제공  그러나, 기본적으로 system call 은 운영체제에 맞춰져서 사용방법이 복잡할 수 있다. -&gt; 그래서 각 언어별로 운영체제 기능을 요청할 수 있는 인터페이스를 제공 \[Library or API\],  이들 안을 들여다보면 결국 그 안에 있는 system call 을 통해 운영체제에 기능을 요청하는 것 ,   이러한 Library 나 api 를 기반으로 해서, 응용 프로그램이나 shell 을 만들고,  이들을 사용해서 사용자가 컴퓨터를 사용하는 것 
*  프로그래밍 언어를 배운다는 것은 API 또는 Library 사용법을 익히는 것이고, 운영체제의 사용법을 익힌다는 것은 shell 의 사용법을 익히는 것, 근데, 이 둘은 상단에 위치 ,

## 04. 운영체제를 만든다면?

* 순서
  * 1. 운영체제를 개발한다. \[kernel\]

      \[kernel\] : 운영체제의 핵심 기능을 가진 소프트웨어   

  * 2. 시스템 콜을 개발  
  * 3. API 개발 ex\) C API\(library\), java API  
  * 4. shell 프로그램 개발  
  * 5. 응용 프로그램 개발 

## 05. 운영체제와 시스템 콜

* **시스템 콜을 정의하는 문서**
  *  POSIX API : 유닉스 계열의 운영체제들은 대부분 이것을 따름
  *  윈도우 API : 윈도우 운영체제가 따랐던 것 
* **시스템 콜 vs API**
  *  시스템 콜
    *  운영체제 기능을 호출하는 함수  
  *  API
    *  각 언어별 운영체제 기능 호출 인터페이스 함수, 각 언어별 인터페이스 

## 06. 정리

* **운영체제는 컴퓨터 하드웨어와 응용 프로그램을 관리**
* **사용자 인터페이스 제공 위해 shell 프로그램 제공**
* **응용 프로그램이 운영체제 기능 요청하기 위해** **운영체제는 신청서의 역할인 시스템 콜을 제공**  - 보통 직접 시스템 콜 사용하는 것 보다는   해당 시스템 콜을 사용해서 만든 각 언어별 라이브러리\(API\)를 사용한다.

